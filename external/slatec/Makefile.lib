
vpath % $(SRCDIR)

TARGET = libslatec.a

# When using gfortran the flag -std=f2003 breaks
# f77 compatibility. If present, we remove it
# F95OPT = $(filter-out -std=f2003,$(FXXOPT))

%.o: %.f
	$(FXX) $(FXXOPT) -o $@ -c $<

SOURCES = $(notdir $(wildcard $(SRCDIR)/*.f))

OBJS = $(SOURCES:.f=.o)

all: $(TARGET)

$(TARGET): $(OBJS)
	rm -f $(TARGET)
	ar cq $(TARGET) $(OBJS)

.PHONY: clean distclean

clean:
	rm -f *.o
